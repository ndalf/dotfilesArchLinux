"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[611],{68611:(e,t,i)=>{i.r(t),i.d(t,{default:()=>D});var n=i(98135),o=i.n(n),a=i(59713),s=i.n(a),r=(i(33948),i(67294)),l=i.n(r),d=i(66832),c=i(19748),m=i(82990),p=i(71802),u=i(8848),h=i(28240),g=i(36360),y=i(95477),f=i(33846),v=i(63406),b=i(62727),S=i(45023),w=i(47966),k=i(97977),N=i(96486),I=i.n(N),R=i(3779),C=i(28020),A=i(39249);i(27369);class E extends d.Z{constructor(...e){super(...e),s()(this,"searchRef",l().createRef()),s()(this,"firstApiRef",l().createRef()),s()(this,"apiSectionRefs",{find:l().createRef(),pricing:l().createRef(),recovery:l().createRef(),security:l().createRef(),rateLimits:l().createRef(),experiments:l().createRef(),findAdminLogs:l().createRef(),utilities:l().createRef()}),s()(this,"storeTypes",{searchStore:f.Z}),s()(this,"scrollToSection",(e=>{const t=this.apiSectionRefs[e];t.current&&t.current.scrollIntoView()})),s()(this,"handleKeyDown",(e=>{(0,S.Z)(this.environment,e,"command+/")&&(e.preventDefault(),this.stores.searchStore.reset(),this.searchRef.current&&this.searchRef.current.focusInput())})),s()(this,"handleLogOut",(()=>{(0,k.actuallyLogoutAndDeleteAllLocalData)(this.environment)}))}componentDidMount(){super.componentDidMount(),window.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown),super.componentWillUnmount()}renderComponent(){const e=(0,C.S4)(this.environment),{searchStore:t}=this.stores,i=t.state.inputValue.toLowerCase(),n=(0,v.v2)(),a=n?v.Fr:v.Fr.filter((e=>"full"!==e.requiresRole)),s=i.length>1?a.filter((e=>(0,v.H2)(e,new RegExp(i,"i")))):a;let r=!0;const d=v.KC.map((e=>{const t=s.filter((t=>t.sectionName===e)).map((e=>{const t=r?this.firstApiRef:void 0;return r=!1,l().createElement(c.Z,{style:E.itemStyle,ref:t,key:e.apiName,api:e})}));return this.renderSection({key:e,title:v._c[e].title,children:t})}));return o()(g.Z,{title:"Notion Admin Mode"},void 0,o()("div",{style:E.wrapStyle},void 0,o()("div",{style:E.style},void 0,o()("div",{style:E.itemStyle},void 0,o()("div",{style:E.headerStyle},void 0,"Notion ",!n&&"Restricted"," Admin Mode"," ","production"!==y.default.env?"(".concat(y.default.env,")"):void 0),o()("div",{style:{marginBottom:12}},void 0,o()(h.Z,{href:"https://dev.notion.so/notion/Use-Admin-Mode-05f1e0ad9aa749a4b3dc07410b499465",external:!0,inline:!0,underline:!0},void 0,"Click here")," ","to learn more about how to use Admin Mode."),o()("div",{style:{display:"flex"}},void 0,o()("div",{style:{flex:1}},void 0,"Currently Logged in as:"," ",e&&e.email),o()(w.Z,{onClick:this.handleLogOut,style:{height:"auto"}},void 0,"Log Out")),n&&o()(p.Z,{})),o()("div",{style:E.itemStyle},void 0,o()("div",{style:{fontWeight:m.Z.fontWeight.bold,fontSize:18,marginBottom:6}},void 0,"Go to (cmd-/)"),o()("div",{style:{marginBottom:14,display:"flex"}},void 0,l().createElement(b.Z,{showClearButton:!0,placeholder:"Filter, then press enter to jump",ref:this.searchRef,focusInitial:!0,value:this.stores.searchStore.state.inputValue,onChange:e=>{t.setState({...t.state,inputValue:e.target.value})},left:R.Z.searchThick({width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:u.Vx().mediumIconColor}),onSubmit:()=>{this.firstApiRef.current&&this.firstApiRef.current.focus()}})),v.KC.map((e=>o()("div",{style:{marginTop:6}},e,o()(h.Z,{onClick:()=>this.scrollToSection(e),underline:!0},void 0,v._c[e].title))))),d,s.length<a.length&&o()("div",{style:{opacity:.7,width:"100%",color:u.Vx().lightIconColor,margin:8,fontStyle:"italic"}},void 0,a.length-s.length,' hidden. To show all, press Cmd-/ or click "Clear" above.',o()("br",{}),this.randomQuip())),o()(A.Ix,{hideProgressBar:!0,autoClose:1500,transition:A.Mi})))}renderSection(e){const{title:t,children:i,key:n}=e;if(i&&(!Array.isArray(i)||i.length))return l().createElement("div",{ref:this.apiSectionRefs[n],id:n,key:n,style:{...E.style,marginTop:12,marginBottom:12,width:"100%"}},o()("div",{style:{...E.headerStyle,width:"100%",marginLeft:E.itemStyle.margin}},void 0,t),i)}randomQuip(){return I().sample(["Hi, spam duplicate","Your hair is looking so nice today!",'"The faster we are at getting botter, the faster we get botter" - Doug EngelBot',"You're doing a great job, keep it up!!","Computing for everyone","Remember to take a stretch break every once in a while"])}}s()(E,"wrapStyle",{height:"100vh",overflow:"auto",background:u.Vx().sidebarBackground,padding:8}),s()(E,"style",{display:"flex",flexWrap:"wrap"}),s()(E,"headerStyle",{fontWeight:m.Z.fontWeight.bold,fontSize:36}),s()(E,"itemStyle",{width:500,padding:18,margin:8,border:"1px solid ".concat(u.Vx().outlineButtonBorder),background:"white",position:"relative"});const D=E},3104:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(98135),o=i.n(n),a=i(67294),s=i(82990),r=i(46951),l=i(66832),d=i(79696);class c extends l.Z{renderComponent(){const{data:e,hideHelp:t}=this.props,i={fontWeight:s.Z.fontWeight.bold,fontSize:18,marginBottom:8};return a.createElement(a.Fragment,null,!t&&a.createElement(a.Fragment,null,o()("div",{style:i},void 0,"Success"),o()(r.Z,{isSmall:!0,isMultiline:!0,style:{marginBottom:8}},void 0,"Click on a value to copy it into your clipboard.")),o()(d.Z,{data:e}))}}},19748:(e,t,i)=>{i.d(t,{Z:()=>j});var n=i(98135),o=i.n(n),a=i(67154),s=i.n(a),r=i(59713),l=i.n(r),d=(i(33948),i(41817),i(85827),i(67294)),c=i.n(d),m=i(96486),p=i.n(m),u=i(61269),h=i(52016);class g extends h.Z{getInitialState(){return{inputValues:{}}}}const y=g;var f=i(66832),v=i(62727),b=i(4615),S=i(79583),w=i(48762),k=i(92625),N=i(82990),I=i(82970),R=i(47966),C=i(15102),A=i(6958),E=i(63406),D=i(46951),x=i(5366),B=i(8848),L=i(3104),T=i(68932);class M extends f.Z{constructor(...e){super(...e),l()(this,"firstInputRef",c().createRef()),l()(this,"storeTypes",{store:y}),l()(this,"renderKey",((e,t,i)=>{const{store:n}=this.stores,a=n.state.inputValues[t],r=0===i?this.firstInputRef:void 0;let l;if(e.type===E.It.String)l=c().createElement(v.Z,{ref:r,value:"string"==typeof a?a:"",showClearButton:!0,onChange:e=>{n.setState({response:void 0,inputValues:{...n.state.inputValues,[t]:e.target.value}})},onSubmit:this.handleSubmit,onClearButtonClick:()=>{n.setState({response:void 0,inputValues:{...n.state.inputValues,[t]:void 0}})}});else if(e.type===E.It.Number)l=c().createElement(v.Z,{ref:r,type:"number",value:"number"==typeof a?a.toString():"",onChange:e=>{n.setState({response:void 0,inputValues:{...n.state.inputValues,[t]:parseInt(e.target.value)}})},onSubmit:this.handleSubmit});else if(e.type===E.It.Options){const i=[M.undefinedKey,...e.options],o={menuTitle:t,items:i,selectedItem:a,onSelect:e=>{n.setState({response:void 0,inputValues:{...n.state.inputValues,[t]:e===M.undefinedKey?void 0:e}})},getKey:e=>e,renderItem:e=>c().createElement(w.Z,s()({},e,{title:e.value===M.undefinedKey?"Empty":e.value})),renderOrigin:e=>c().createElement(R.Z,s()({isLarge:!0,style:{marginBottom:8}},e),a||"Empty"),width:300};l=c().createElement(S.Z,o)}else e.type===E.It.Boolean&&(l=o()(I.Z,{checked:Boolean(a),size:20,onClick:e=>{n.setState({response:void 0,inputValues:{...n.state.inputValues,[t]:!Boolean(a)}})}}));return o()("div",{},t,o()("div",{style:{marginTop:12,marginBottom:4}},void 0,p().startCase(t)),e.comment&&o()(D.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:4,marginBottom:8}},void 0,e.comment),l)})),l()(this,"handleSubmit",(()=>{const{store:e}=this.stores,{apiName:t,schema:i}=this.props.api,{inputValues:n}=e.state,o=(0,x.defineMessages)({loading:{id:"adminAPIRequest.loadingMessage",defaultMessage:"Loading…"}}),a={};for(const r of Object.keys(n)){const e=n[r];i[r]&&(p().isString(e)&&b.qn(e)?a[r]=b.wr(e):a[r]=e)}k.j({message:o.loading});const s=u[t];if(!s)throw new Error("Missing api handler for ".concat(t," - likely either a typo in client/helpers/adminHelpers.tsx or missing declaration in client/actions/api.ts"));s(this.environment,a).then((i=>{k.x(),u.csvApiTriggers[t]&&this.downloadAsCsv(i)||e.setState({...e.state,response:i})}))})),l()(this,"handleModalDismiss",(()=>{const{store:e}=this.stores;e.state.response&&("failed"===e.state.response.type?e.setState({inputValues:e.state.inputValues}):this.resetStoreState(this.props))}))}willMount(e){this.resetStoreState(e)}didMount(){this.shouldShowInline()&&this.handleSubmit()}renderComponent(){const{api:e,defaultParams:t,style:i}=this.props,{apiName:n,displayName:a,schema:s,description:r,emoji:l,isDestructive:d,requiresRole:m}=e,{response:u}=this.stores.store.state;return o()("div",{style:i},void 0,o()("div",{style:M.headerStyle},void 0,o()(A.Z,{size:24,emoji:l}),o()("span",{style:{marginLeft:4}},void 0,a||p().startCase(n))),r&&o()(D.Z,{isSmall:!0,isMultiline:!0},void 0,r),!this.shouldShowInline()&&c().createElement(c().Fragment,null,Object.entries(s).map((([e,i],n)=>t&&t[e]?void 0:this.renderKey(i,e,n))),o()(R.Z,{style:{marginTop:8,marginBottom:8},isLarge:!0,onClick:this.handleSubmit,isRed:d},void 0,"Submit")),this.shouldShowInline()&&!u&&o()("div",{},void 0,o()(T.Z,{style:{width:18,height:18}}),"Loading ..."),this.renderError(u),this.renderResponse(u),"full"===m&&o()("div",{style:M.footerStyle},void 0,"Full Admin Tool"))}renderError(e){if(e&&"success"!==e.type)return o()("div",{style:M.responseErrorStyle},void 0,e.body.message)}renderResponse(e){if(!e||"success"!==e.type)return;const t=this.props.api.customResponseRenderer?o()(this.props.api.customResponseRenderer,{data:e.data,environment:this.environment,singleRecordMode:this.props.singleRecordMode}):o()(L.Z,{data:e.data});return this.shouldShowInline()?t:o()(C.Z,{open:Boolean(e&&"success"===e.type),innerStyle:M.modalStyle,onDismiss:this.handleModalDismiss,disableAnimation:!0,render:()=>t})}focus(){this.firstInputRef.current&&this.firstInputRef.current.focusInput()}downloadAsCsv(e){if(i=e,Boolean("success"===i.type&&Array.isArray(i.data)&&i.data.length>0)){const i=Array.from(e.data.reduce(((e,t)=>(Object.keys(t).forEach((t=>e.add(t))),e)),new Set)),n=[i];for(const t of e.data){const e=new Array(i.length);for(let n=0;n<e.length;n++){const o=i[n];e[n]=t[o]}n.push(e)}const o="data:text/csv;charset=utf-8,".concat(n.map((e=>e.join(","))).join("\n"));var t=encodeURI(o);return window.open(t),!0}var i;return!1}shouldShowInline(){const{showByDefault:e,singleRecordMode:t}=this.props;return e&&t}resetStoreState(e){const{defaultParams:t}=e,{store:i}=this.stores,n={};for(const o of Object.keys(e.api.schema)){const i=e.api.schema[o];t&&t[o]?n[o]=t[o]:i&&void 0!==i.defaultValue?n[o]=i.defaultValue:n[o]=void 0}i.setState({inputValues:n})}}l()(M,"undefinedKey","__undefined"),l()(M,"headerStyle",{fontWeight:N.Z.fontWeight.bold,fontSize:20,display:"flex",alignItems:"center",marginBottom:6}),l()(M,"footerStyle",{fontSize:10,position:"absolute",bottom:7,right:20}),l()(M,"responseErrorStyle",{color:B.ZP.red,display:"inline-flex",marginLeft:8}),l()(M,"modalStyle",{width:"calc(100% - 120px)",height:"calc(100% - 120px)",padding:24,fontSize:"1.2em",overflow:"scroll"});const j=M},71802:(e,t,i)=>{i.d(t,{Z:()=>C});var n=i(98135),o=i.n(n),a=i(59713),s=i.n(a),r=(i(33948),i(67294)),l=i.n(r),d=i(66832),c=i(62727),m=i(52016);class p extends m.Z{getInitialState(){return{loginEmail:"",intercomLink:""}}}const u=p;var h=i(82990),g=i(92625),y=i(47307),f=i(95240);async function v(e,t){return function(e,t,i){return(0,f.Z)({environment:e,url:"/__admin/".concat(t),method:"POST",data:i,json:!0})}(e,"loginAsUser",t)}var b=i(97977),S=i(47966),w=i(15517),k=i(5366),N=i(97148),I=i(17256);class R extends d.Z{constructor(...e){super(...e),s()(this,"storeTypes",{store:u}),s()(this,"handleLoginEmailChange",(e=>{const{store:t}=this.stores;t.setState({...t.state,loginEmail:e.target.value})})),s()(this,"handleIntercomLinkChange",(e=>{const{store:t}=this.stores;t.setState({...t.state,intercomLink:e.target.value})})),s()(this,"handleSubmit",(async e=>{const{store:t}=this.stores,{loginEmail:i,intercomLink:n}=t.state,o=(0,k.defineMessages)({loggingInAs:{id:"adminLoginAsUser.loggingInAs.loadingMessage",defaultMessage:"Logging in as {userEmail}"}});if("on"===N.default.getGroup(this.environment,"user-data-consent")&&0===n.length)return void y.showErrorMessage("You must include an intercom link to login as a user!");e.target.blur(),g.j({message:o.loggingInAs,interpolatedValues:{userEmail:i}}),w.ZL(),sessionStorage.clear();const a=await v(this.environment,{email:i,intercomLink:n});if("failed"===a.type)g.x(),y.showError(a);else{const{userId:e}=a.data,t='Success! click "Continue" to enter account for "'.concat(i,'".'),n=a.data.expiryTime?"".concat(t," The user has granted access until ").concat(I.Z.unix(a.data.expiryTime/1e3).locale("en").format("lll"),"."):t;g.x(),y.showDialog({message:n,showCancel:!1,keepFocus:!0,items:[{label:"Continue",color:"blue",onAccept:()=>{b.loginAsAdmin({userId:e,environment:this.environment})}}]})}}))}willMount(e){e.email&&this.stores.store.setState({...this.stores.store.state,loginEmail:e.email})}renderComponent(){const{store:e}=this.stores,t="on"===N.default.getGroup(this.environment,"user-data-consent");return o()("div",{},void 0,o()("div",{style:R.headerStyle},void 0,"Login as User"),t?o()(l().Fragment,{},void 0,o()("div",{style:{marginTop:12,marginBottom:4}},void 0,"Intercom link"),o()(c.Z,{value:e.state.intercomLink,onChange:this.handleIntercomLinkChange,style:{marginBottom:8}})):void 0,this.props.email?o()("div",{},void 0,"Login as ",this.props.email):l().createElement(l().Fragment,null,o()("div",{style:{marginTop:12,marginBottom:4}},void 0,"User email"),o()(c.Z,{value:e.state.loginEmail,onChange:this.handleLoginEmailChange,onSubmit:this.handleSubmit,style:{marginBottom:8}})),o()(S.Z,{isLarge:!0,onClick:this.handleSubmit},void 0,"Login"))}}s()(R,"headerStyle",{fontWeight:h.Z.fontWeight.bold,fontSize:18,marginTop:24});const C=R},79696:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(98135),o=i.n(n),a=(i(67294),i(55171)),s=i.n(a),r=i(39249),l=i(56564),d=i(66832);class c extends d.Z{handleReactJsonSelect(e){let t;var i;(t="string"==typeof e.value?e.value:JSON.stringify(e.value),t)&&(l.RD({environment:this.environment,stringValue:t}),(0,r.Am)("Copied ".concat((i=t).length>50?"".concat(i.substr(0,49),"..."):i," to clipboard")))}renderComponent(){const{data:e}=this.props;return o()(s(),{src:e,displayDataTypes:!1,onAdd:!1,onEdit:!1,onDelete:!1,collapsed:!1,enableClipboard:!1,onSelect:e=>this.handleReactJsonSelect(e)})}}},63406:(e,t,i)=>{i.d(t,{It:()=>Y,_c:()=>J,KC:()=>H,Fr:()=>ee,H2:()=>X,Cw:()=>Q,v2:()=>$});var n=i(98135),o=i.n(n),a=(i(41817),i(33948),i(67294)),s=i.n(a),r=i(88477),l=i(96486),d=i.n(l),c=i(28240),m=i(27832),p=i(25488),u=i(85404),h=i(38770),g=i(85419),y=i(7170),f=i(26178),v=i(66897),b=i(45953),S=i(33929),w=i(8848);function k(e){const{table:t,record:i,children:n}=e;return o()("a",{href:"/__admin/".concat(t,"/").concat(i.id),style:{cursor:"pointer",textDecoration:"none"}},void 0,n||a.createElement(a.Fragment,null,i.name,i.name&&" ",i.id))}function N(e){const{user:t,children:i}=e;return t?o()("a",{href:"/__admin/notion_user/".concat(t.id),style:{cursor:"pointer",textDecoration:"none"}},void 0,i||a.createElement(a.Fragment,null,t.email," ",t.id," ",t.isBot&&" (bot")):a.createElement(a.Fragment,null,"Unknown User")}const I={fontWeight:i(82990).Z.fontWeight.bold,fontSize:20,display:"flex",alignItems:"center",marginBottom:6},R={fontSize:12,color:w.ZP.mediumTextColor};var C=i(78062),A=i(77021),E=i(83217);function D(e){const{apiLog:t,adminUser:i}=e,n=i?(0,v.$4)(S.default.getIntl(),(0,v.dp)(i)):t.admin_user_id===g.s$.id?"NotionAdminProcess":"Unknown user: ".concat(t.admin_user_id);return a.createElement(a.Fragment,null,"".concat(new Date(t.timestamp).toLocaleString()," by "),o()("i",{},void 0,n)," via ",o()("i",{},void 0,t.event_name))}function x(e){const{opLog:t}=e,{operation:i}=t;return"set"===i.command||"update"===i.command?a.createElement(a.Fragment,null,o()("i",{},void 0,i.command)," ",o()("b",{},void 0,(i.path||[]).join("."))," to"," ",o()("b",{},void 0,JSON.stringify(i.args))):a.createElement(a.Fragment,null,JSON.stringify(t.operation))}function B(e){const{pointer:t,recordMap:i}=e,n=i&&i.get(t),{table:s}=t;if(!n)return a.createElement(a.Fragment,null);if(s===f.bx||s===u.iU)return o()(k,{record:n,table:s},n.id);if(s===C.Sr||s===A.j||s===E.dx){const e=n;return o()(k,{record:e,table:g.KJ},e.id)}return s===g.KJ?o()(k,{record:n,table:s},n.id,(0,v.$4)(S.default.getIntl(),(0,v.dp)(n))):a.createElement(a.Fragment,null,JSON.stringify(n))}function L(e){const{opLogs:t,recordMapJson:i}=e,n=(0,a.useMemo)((()=>i&&new b.Ak(i)),[i]);return a.createElement(a.Fragment,null,t.map((e=>o()("li",{},e.id,o()(x,{opLog:e}),n&&" on ",o()(B,{pointer:e.operation.pointer,recordMap:n})))))}function T(e){const{entry:t}=e;return o()("div",{},void 0,t.apiLog?o()(D,{apiLog:t.apiLog,adminUser:t.adminUser}):"????",o()("ul",{style:{marginTop:"0.1em",marginBottom:"0.5em"}},void 0,t.apiLog&&o()("li",{},"params","with params: ",JSON.stringify(t.apiLog.params)),o()(L,{opLogs:t.opLogs})))}function M(e){const{data:t}=e;return 0===t.changes.length?a.createElement(a.Fragment,null,"No changes"):a.createElement(a.Fragment,null,t.changes.map((e=>o()(T,{entry:e},e.apiLog?e.apiLog.id:"unknown_key"))))}var j=i(3104),Z=i(36360),F=i(71802);const U={fillRule:"evenodd",clipRule:"evenodd",fill:"#635BFF"},V=()=>o()("svg",{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 468 222.5",style:{height:"15px"}},void 0,o()("g",{},void 0,o()("path",{style:U,d:"M414,113.4c0-25.6-12.4-45.8-36.1-45.8c-23.8,0-38.2,20.2-38.2,45.6c0,30.1,17,45.3,41.4,45.3 c11.9,0,20.9-2.7,27.7-6.5v-20c-6.8,3.4-14.6,5.5-24.5,5.5c-9.7,0-18.3-3.4-19.4-15.2h48.9C413.8,121,414,115.8,414,113.4z M364.6,103.9c0-11.3,6.9-16,13.2-16c6.1,0,12.6,4.7,12.6,16H364.6z"}),o()("path",{style:U,d:"M301.1,67.6c-9.8,0-16.1,4.6-19.6,7.8l-1.3-6.2h-22v116.6l25-5.3l0.1-28.3c3.6,2.6,8.9,6.3,17.7,6.3 c17.9,0,34.2-14.4,34.2-46.1C335.1,83.4,318.6,67.6,301.1,67.6z M295.1,136.5c-5.9,0-9.4-2.1-11.8-4.7l-0.1-37.1 c2.6-2.9,6.2-4.9,11.9-4.9c9.1,0,15.4,10.2,15.4,23.3C310.5,126.5,304.3,136.5,295.1,136.5z"}),o()("polygon",{style:U,points:"223.8,61.7 248.9,56.3 248.9,36 223.8,41.3 \t"}),o()("rect",{x:"223.8",y:"69.3",style:U,width:"25.1",height:"87.5"}),o()("path",{style:U,d:"M196.9,76.7l-1.6-7.4h-21.6v87.5h25V97.5c5.9-7.7,15.9-6.3,19-5.2v-23C214.5,68.1,202.8,65.9,196.9,76.7z"}),o()("path",{style:U,d:"M146.9,47.6l-24.4,5.2l-0.1,80.1c0,14.8,11.1,25.7,25.9,25.7c8.2,0,14.2-1.5,17.5-3.3V135 c-3.2,1.3-19,5.9-19-8.9V90.6h19V69.3h-19L146.9,47.6z"}),o()("path",{style:U,d:"M79.3,94.7c0-3.9,3.2-5.4,8.5-5.4c7.6,0,17.2,2.3,24.8,6.4V72.2c-8.3-3.3-16.5-4.6-24.8-4.6 C67.5,67.6,54,78.2,54,95.9c0,27.6,38,23.2,38,35.1c0,4.6-4,6.1-9.6,6.1c-8.3,0-18.9-3.4-27.3-8v23.8c9.3,4,18.7,5.7,27.3,5.7 c20.8,0,35.1-10.3,35.1-28.2C117.4,100.6,79.3,105.9,79.3,94.7z"})));function P(e){const{space:t,userRole:i}=e;return o()("li",{},t.id,o()(k,{table:"space",record:t})," • role: ",i," ",t.isDeleted&&" (deleted)"," •",o()("a",{href:t.billing.stripeCustomerUrl,style:{cursor:"pointer"}},void 0,o()(V,{})))}function O(e){const{spaces:t,title:i}=e;return 0===Object.keys(t).length?null:a.createElement(a.Fragment,null,o()("div",{},void 0,o()("h3",{},void 0,i),o()("ul",{},void 0,Object.entries(t).map((([e,t])=>{if(!t)return o()("li",{},e,e," (missing?)");const{space:i,userRole:n}=t;return d().isEmpty(t)?o()("li",{},e,"Unknown space: ",e):o()(P,{space:i,userRole:n})})))))}var _=i(79696);var K=i(46951);function W(e){const[t,i]=a.useState(!1),{title:n,items:s,renderItem:r}=e;return a.createElement(a.Fragment,null,o()(K.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:4,marginBottom:8}},void 0,n,": ",(s||[]).length,o()("span",{style:{paddingLeft:5,cursor:"pointer",color:"blue",textDecoration:"underline",fontSize:"small"}},void 0,!t&&o()("a",{onClick:()=>i(!0)},void 0,"(show)"),t&&o()("a",{onClick:()=>i(!1)},void 0,"(hide)")),t&&s&&o()("ul",{},void 0,s.map(r))))}function q(e){return o()(W,{title:e.title,items:e.users,renderItem:e=>o()("li",{},e.id,o()(N,{user:e}))})}function z(e){return o()(W,{title:e.title,items:e.bots,renderItem:e=>{var t;return o()("li",{},e.id,e.name||"unnamed"," created by ",null===(t=e.createdBy)||void 0===t?void 0:t.id," on"," ",e.createdAt,", type: ",e.type)}})}function G(e){const{time:t}=e;return t?a.createElement(a.Fragment,null,t.substr(0,10)):a.createElement(a.Fragment,null,"No time recorded")}const J={find:{title:"Find user and workspace information"},pricing:{title:"Pricing and credits"},recovery:{title:"Recovery"},security:{title:"Security"},rateLimits:{title:"Rate limits"},experiments:{title:"Experiments"},findAdminLogs:{title:"Find Admin logs"},utilities:{title:"Utilities"}},H=Object.keys(J);let Y;function $(){const e=m.default.state.currentUserStore;if(e&&e.state.value){return"makenotion.com"===(0,p.Z)(e.state.value.email)}return!1}function Q(e,t){for(const i in e.schema){const n=e.schema[i];if(n.type===Y.String&&n.table===t)return{key:i,schema:n}}}function X(e,t){if(e.apiName.match(t)||d().startCase(e.apiName).match(t))return!0;if(e.displayName&&e.displayName.match(t))return!0;if("string"==typeof e.description&&e.description.match(t))return!0;for(const[i,n]of Object.entries(e.schema)){if(i.match(t)||d().startCase(i).match(t))return!0;if(n.comment&&n.comment.match(t))return!0}return!1}!function(e){e[e.String=0]="String",e[e.Number=1]="Number",e[e.Boolean=2]="Boolean",e[e.Options=3]="Options"}(Y||(Y={}));const ee=[{sectionName:"find",apiName:"adminSearchUsers",displayName:"Find User Information",emoji:"🔎",description:"Fill out just one of the fields below. Returns information about a user.",schema:{userId:{type:Y.String,table:g.KJ,showByDefaultInSingleRecordMode:!0},email:{type:Y.String}},customResponseRenderer:function(e){const{data:t,singleRecordMode:i}=e;return a.createElement(a.Fragment,null,i&&o()(Z.Z,{title:"Notion User Admin: ".concat((0,v.$4)(S.default.getIntl(),(0,v.dp)({...t,version:0})))}),o()(O,{title:"Current Spaces",spaces:t.spaces}),o()(O,{title:"Left Spaces",spaces:t.leftSpaces}),o()(j.Z,{data:t}),o()(F.Z,{email:t.email}))}},{sectionName:"findAdminLogs",apiName:"getUserAdminApiLog",displayName:"Find Admin Changes to User",emoji:"🔎",description:"Returns information about changes admins have made to a user.",schema:{userId:{type:Y.String,table:g.KJ,showByDefaultInSingleRecordMode:!0}},customResponseRenderer:M},{sectionName:"findAdminLogs",apiName:"getAdminHistory",displayName:"Find Changes an Admin User has made",emoji:"🔎",description:"Returns information about changes admins have made via admin tools",schema:{userId:{type:Y.String,table:g.KJ,showByDefaultInSingleRecordMode:!1},destructiveOnly:{type:Y.Boolean,defaultValue:!0}},customResponseRenderer:function(e){const{data:t}=e;return 0===t.changes.length?a.createElement(a.Fragment,null,"No changes"):a.createElement(a.Fragment,null,t.changes.map((e=>{const{apiLog:i,opLogs:n}=e;return o()(a.Fragment,{},i.id,new Date(i.timestamp).toDateString()," via ",i.event_name," - ",n&&n.length>0?o()(L,{opLogs:n,recordMapJson:t.adminRecordMap}):o()(_.Z,{data:i.params}),o()("br",{}))})))}},{sectionName:"find",apiName:"adminSearchSpaces",displayName:"Find Workspace Information",emoji:"🔎",description:"Fill out just one of the fields below. Returns information about a workspace.",schema:{spaceId:{type:Y.String,table:f.bx,showByDefaultInSingleRecordMode:!0},domain:{type:Y.String},stripeCustomerId:{type:Y.String}},customResponseRenderer:function(e){const{data:t,singleRecordMode:i}=e,n=d().isNumber(t.members)?void 0:d().groupBy(t.members,"role"),s=Array.isArray(t.bots)?t.bots:[];return a.createElement(a.Fragment,null,i&&o()(Z.Z,{title:"Notion Space Admin: ".concat(t.name)}),o()("h2",{},void 0,t.name," ",t.id,t.isDeleted&&o()("span",{style:{color:"red"}},void 0," DELETED")),o()("div",{},void 0,"Created By: ",o()(N,{user:t.createdBy})," on"," ",t.createdTime),t.isDeleted&&o()("div",{},void 0,"Deleted On: ",t.lastEditedTime),o()("div",{},void 0,n&&o()("div",{},void 0,o()("div",{style:{marginTop:12,marginBottom:4}},void 0,"Users"),o()(q,{title:"Admins",users:n.admin}),o()(q,{title:"Members",users:n.member}),o()(q,{title:"Guests",users:n.guest}),o()(z,{title:"Bots",bots:s})),o()("div",{},void 0,o()("div",{style:{marginTop:12,marginBottom:4}},void 0,"Billing"),o()("a",{href:t.billing.stripeCustomerUrl,style:{cursor:"pointer"}},void 0,o()(V,{})),o()(j.Z,{hideHelp:!0,data:t.billing}))),o()(j.Z,{data:t}))}},{sectionName:"find",apiName:"adminSearchBlocks",displayName:"Find Block Information",emoji:"🔎",description:"Fill out the block id (can be from a page URL). Returns information about the block.",schema:{blockId:{type:Y.String,table:u.iU,showByDefaultInSingleRecordMode:!0}},customResponseRenderer:function(e){const{data:t,singleRecordMode:i}=e,n=t.deleted.trashedByParent,s=t.deleted.permanentlyDeletedByParent;return a.createElement(a.Fragment,null,i&&o()(Z.Z,{title:"Notion Block Admin: ".concat(t.id)}),o()("div",{style:{...I,paddingTop:5}},void 0,"Block ",t.id,t.deleted.isPermanentlyDeleted?" (permanently deleted)":t.deleted.isInTrash?" (in trash)":""),o()("div",{style:R},void 0,o()("div",{},void 0,"in space: ",o()(k,{table:"space",record:t.space})),t.createdBy&&o()("div",{},void 0,"created by: ",o()(N,{user:t.createdBy})," on"," ",o()(G,{time:t.createdTime})),t.lastEditedBy&&o()("div",{},void 0,"last edited by: ",o()(N,{user:t.lastEditedBy})," on"," ",o()(G,{time:t.lastEditedTime})),!t.deleted.isPermanentlyDeleted&&t.deleted.isInTrash&&(n?o()("div",{},void 0,"in trash due to: user trashed parent -"," ",o()(k,{table:n.table,record:n}),")"):o()("div",{},void 0,"in trash due to: user trashed this block")),t.deleted.isPermanentlyDeleted&&(s?o()("div",{},void 0,"permanently deleted due to: parent being permanently deleted"," ",s.table,":",s.id):o()("div",{},void 0,"permanently deleted due to: user permanently deleted this block"))),o()("p",{}),o()(j.Z,{data:t,hideHelp:!0}))}},{sectionName:"findAdminLogs",apiName:"getSpaceAdminApiLog",displayName:"Find Admin Changes to Space",emoji:"🔎",description:"Returns information about changes admins have made to a space.",schema:{spaceId:{type:Y.String,table:f.bx,showByDefaultInSingleRecordMode:!0}},customResponseRenderer:M},{sectionName:"findAdminLogs",apiName:"getBlockAdminApiLog",displayName:"Find Admin Changes to Block",emoji:"🔎",description:"Returns information about changes admins have made to a block.",schema:{blockId:{type:Y.String,table:u.iU,showByDefaultInSingleRecordMode:!0}},customResponseRenderer:M},{sectionName:"find",apiName:"adminSearchForUsersInSpaces",displayName:"Find All Unique Users in Workspaces",emoji:"🔎",description:"Download a CSV with unique users in each workspace",schema:{spaceIds:{type:Y.String,comment:"Comma-separated space_ids to search through for unique users",table:f.bx},includeGuests:{type:Y.Boolean,comment:"whether to include guests in the response"}}},{sectionName:"find",apiName:"adminGetDataAccessConsent",displayName:"Check data access consent expiry time",emoji:"🔐",description:"Check if the user has granted access and when that access will expire.",schema:{email:{type:Y.String}}},{sectionName:"pricing",apiName:"adminWhitelistCreditDomain",emoji:"🚩",description:"Add a domain name to allowlist for credits.",schema:{domain:{type:Y.String}}},{sectionName:"pricing",apiName:"updateSubscription",emoji:"💵",schema:{spaceId:{type:Y.String,table:f.bx},plan:{type:Y.Options,options:[...new Set([...r.AO,...r.BV])],comment:"Optional, only fill out if you want to change the plan."},billing:{type:Y.Options,options:[...r.b7],comment:"Required if the user is not upgraded yet. Otherwise optional, only fill out if you want to change the billing type."},dontProrate:{type:Y.Boolean,comment:"If checked, changing the subscription will not affect the account balance."},billingEmail:{type:Y.String,comment:"This field is required if you are selecting Billing=send_invoice and the subscription has no email currently. Otherwise, it is optional."}},isDestructive:!0,requiresRole:"full"},{sectionName:"pricing",apiName:"cancelSubscription",emoji:"😢",schema:{spaceId:{type:Y.String,table:f.bx},cancelImmediately:{type:Y.Boolean,comment:"If unchecked, the user will still be subscribed until the end of the current billing period. If checked, the user will lose access to their subscription immediately"}},isDestructive:!0,requiresRole:"full"},{sectionName:"pricing",apiName:"getBillingHistory",emoji:"📜",schema:{spaceId:{type:Y.String,table:f.bx},limit:{type:Y.Number,defaultValue:100}}},{sectionName:"security",apiName:"disableUserAnalytics",emoji:"👻",description:s().createElement(s().Fragment,null,o()("p",{},void 0,"Disable/Enable Intercom and Amplitude for a user. The user may need to log out/log in to see changes."),o()("p",{},void 0,"If analytics are disabled, the user will no longer see Intercom, so they will have to reach out to team@makenotion.com for support. These emails route to Intercom."," ")),schema:{userId:{type:Y.String,table:g.KJ},enableAnalytics:{type:Y.Boolean}},isDestructive:!0},{sectionName:"security",apiName:"adminSetDisableSpacePublicAccess",emoji:"🙅‍♀️",description:"Disable public pages for a workspace. Use this for DMCA takedowns or phishing scammers. Disabling public pages is silent: users will still be able to click the button in the UI, but their pages will not appear publicly.",schema:{spaceId:{type:Y.String,table:f.bx},disabled:{type:Y.Boolean,defaultValue:!0}},isDestructive:!0},{sectionName:"security",apiName:"adminSetPageContentClassification",emoji:"🏛",description:"",schema:{pageId:{type:Y.String,table:u.iU},contentClassification:{type:Y.Options,options:u.XO,defaultValue:"social_engineering"},url:{comment:"External link url (optional). Use this if the notion page links to a malicious site outside of notion.so - all pages containing this url will be flagged if this is set.",type:Y.String}},isDestructive:!0},{sectionName:"security",apiName:"adminDisableReverifyForUser",emoji:"️♻️",description:"Disables the reverification flow for users who no longer have access to their email account. Use sparingly (and ideally only for education accounts).",schema:{userId:{type:Y.String,table:g.KJ}},isDestructive:!0},{sectionName:"security",apiName:"adminAddPublicEmailDomains",emoji:"📪",description:"Add domains as a comma-separated list to disallow them from being used as allowed email domains, e.g. domains that are email providers. This will also remove the domain from any workspace that currently has the domain set as an allowed email domain.",schema:{domains:{type:Y.String}},isDestructive:!0},{sectionName:"pricing",apiName:"createReferral",emoji:"🗣",description:'Manually create a referral from one user to another. This will automatically apply credits to both user accounts. Check in "Find User Information" to confirm.',schema:{fromEmail:{type:Y.String},toEmail:{type:Y.String}},isDestructive:!0},{sectionName:"pricing",apiName:"isEmailEducation",emoji:"👩🏻‍🎓",description:"Is this email or domain an education email or domain?",schema:{email:{type:Y.String,comment:"E.g. name@school.edu or school.edu"}}},{sectionName:"pricing",apiName:"allowEducationEmails",emoji:"📚",description:"Add email domains and/or addresses that are allowed to get free Education plan.",schema:{allow:{type:Y.String,comment:"Comma-separated emails and domains to allow, e.g. clownschool.ca, imastudent@gmail.com, strandford.edu, student4eva@hotmail.com"}}},{sectionName:"pricing",apiName:"getPromoCode",emoji:"🆓",description:"Get information on a Stripe coupon code.",schema:{code:{type:Y.String}}},{sectionName:"pricing",apiName:"adminBulkAddPromotionCodes",emoji:"🆓",description:"Adds Promotion codes to an existing Stripe coupon.",schema:{coupon:{type:Y.String,comment:"The id of the coupon in Stripe"},codes:{type:Y.String,comment:"Comma-separated list of promotion codes"},expirationDate:{type:Y.String,comment:"Should be in the format Month-Day-Year (eg. 03-30-1993)"}}},{sectionName:"recovery",apiName:"adminRemoveSpaceUsersAndTransferContent",displayName:"Remove Users and Transfer Content",emoji:"⚠️",description:"For enterprise customers, provide a comma-separated list of emails for users to remove from the space and transfer ownership to a workspace admin. If customer users SCIM, make sure they have already removed these users through SCIM.",schema:{spaceId:{type:Y.String},emails:{type:Y.String,comment:"Emails of users to remove and transfer content from."},usersAlreadyRemoved:{type:Y.Boolean,comment:"Check this box if customer uses SCIM, and users have already been removed through SCIM."},adminEmail:{type:Y.String,comment:"Must be an admin of the workspace. The permission change to the content will be performed as this user."},transferMemberEmail:{type:Y.String,comment:"Private pages of the removed accounts will be transferred into this account's private pages."}}},{sectionName:"recovery",apiName:"recoverSpace",emoji:"👩‍👩‍👧‍👧",description:s().createElement(s().Fragment,null,o()(c.Z,{underline:!0,inline:!0,external:!0,href:"https://dev.notion.so/notion/Recovery-Accounts-Workspaces-Pages-Content-de4ef68179e441f4a720eb345c72cdee#03ca1aa5a662491097fa1802263a4a53"},void 0,"Usage Guide"),o()("br",{}),o()("br",{}),"Recover a deleted workspace. The workspace will be restored to the user who deleted it. The email of this user will be shown in a popup after you restore."),schema:{spaceId:{type:Y.String,table:f.bx}},isDestructive:!0},{sectionName:"recovery",apiName:"adminFindDeletedUser",emoji:"😵",description:"Find deleted accounts associated with an email address. You can recover any of the resulting accounts using the userId.",schema:{email:{type:Y.String}},isDestructive:!0,customResponseRenderer:function(e){const{data:t}=e;return a.createElement(a.Fragment,null,o()("div",{style:I},void 0,t.users.length," deleted users found"),t.users.map((e=>o()("div",{},void 0,o()(k,{table:"notion_user",record:e},void 0,e.id)))),o()(j.Z,{data:t}))}},{sectionName:"recovery",apiName:"recoverUser",emoji:"❤",description:"Recover a deleted account. Any workspaces that got deleted when they deleted their account will be restored, with them as the only admin. Shared workspaces will not be restored – users have to ask a current admin to add them back.",schema:{userId:{type:Y.String,table:g.KJ}},isDestructive:!0},{sectionName:"recovery",apiName:"adminChangeEmail",emoji:"🔷",description:s().createElement(s().Fragment,null,o()(c.Z,{underline:!0,inline:!0,external:!0,href:"https://dev.notion.so/notion/Change-Account-Emails-f547667d52e3473081eab9f62e3a52e3"},void 0,"Usage Guide"),o()("br",{}),o()("br",{}),"Change a user's email. This tool has serious security implications so please follow the process closely."),schema:{oldEmail:{type:Y.String},newEmail:{type:Y.String}},isDestructive:!0},{sectionName:"recovery",apiName:"adminModifyBlock",emoji:"👩‍👩‍👧‍👧",description:s().createElement(s().Fragment,null,"Trash or recover a block"),schema:{blockId:{type:Y.String,table:u.iU},action:{type:Y.Options,options:["Send to Trash","Restore from Trash"],defaultValue:"Restore from Trash"}},isDestructive:!0},{sectionName:"security",apiName:"adminDeleteUser",emoji:"🗑",description:"Delete user data from Notion's internal databases. By default, users will be permanently purged 30 days after the deletion request. If 'Purge Immediately for GDPR' is checked, user data will be permanently purged at once, rather than in 30 days. Use this option with care, as user data cannot be recovered. 'Purge Immediately for GDPR' will also delete from Segment and Amplitude.",schema:{userId:{type:Y.String,table:g.KJ},purgeImmediatelyForGDPR:{type:Y.Boolean}},isDestructive:!0,requiresRole:"full"},{sectionName:"security",apiName:"revokeUserTokens",emoji:"🖥",description:"Revoke all user tokens. This will sign users out of all active sessions, and they'll have to log in again.",schema:{userId:{type:Y.String,table:g.KJ}},isDestructive:!0},{sectionName:"security",apiName:"revokeBotToken",emoji:"🤖",description:"Revoke a bot's token. A new token will automatically be generated for the bot.",schema:{botId:{type:Y.String,table:y.c}},isDestructive:!0},{sectionName:"security",apiName:"adminSamlConfigForSpace",emoji:"🔐",description:"Add email domain(s) to a workspace for SAML SSO. If they already have a domain configured, this will overwrite it. Leave email domains blank to see the current SAML configuration for a space. To delete SAML config, just provide spaceId of space that needs config to be deleted.",schema:{spaceId:{type:Y.String,table:f.bx},emailDomains:{type:Y.String,comment:"Comma-separated list of email domains you want to add or remove from this workspace. Ownership of domain must be verified."},spaceIds:{type:Y.String,comment:"Comma-separated list of workspace IDs you want to add or remove from this workspace's SAML configuration. Ownership of the workspaces must be verified."},action:{type:Y.Options,options:[...h.BA],defaultValue:"view",comment:"View the current configuration, add/remove the specified email domain(s) and/or additional workspace ID(s), or delete the current configuration."}},isDestructive:!0},{sectionName:"security",apiName:"adminAddScimApiKeyToSpace",emoji:"🔐",description:"Add a SCIM API key to a workspace. An admin of that workspace can view the API key from their security settings screen.",schema:{spaceId:{type:Y.String,table:f.bx}}},{sectionName:"security",displayName:"Add Email to Bypass",apiName:"adminAddEmailToBypass",emoji:"📧",description:"Add an email to validation bypass list. Emails in this list will not be validated by Zerobounce during sign up.",schema:{email:{type:Y.String}},isDestructive:!0},{sectionName:"experiments",apiName:"adminGetClientExperiments",displayName:"Get Experiments As User or Device",emoji:"🤔",description:"Get all experiments and experiment groups for the given user or device ID.",schema:{userId:{type:Y.String},deviceId:{type:Y.String,comment:"Optional. If left blank, experiments that target deviceId will not return a group."}}},{sectionName:"experiments",apiName:"adminViewExperiments",displayName:"View All Experiments",emoji:"🔬",description:"View all experiments with groups and overridden users.",schema:{active:{type:Y.Boolean}}},{sectionName:"experiments",apiName:"adminWhitelistUsersToExperiment",displayName:"Allowlist Users To Experiment",emoji:"📄",description:"Put users into the experiment group with the given ID and group name.",schema:{userIds:{comment:"As a comma-separated list.",type:Y.String},emails:{comment:"As a comma-separated list.",type:Y.String},experimentId:{type:Y.String},experimentGroup:{type:Y.String}},isDestructive:!0,requiresRole:"full"},{sectionName:"rateLimits",apiName:"adminGetRateLimits",displayName:"Get rate limits by email",emoji:"⚠️",description:"Fetch rate limits via a given email.",schema:{email:{type:Y.String,comment:"Fetch rate limits which are enforced via the email."}}},{sectionName:"rateLimits",apiName:"adminResetRateLimits",displayName:"Reset rate limits for email key",emoji:"⚠️",description:"Reset common rate limits for email keys.",schema:{email:{type:Y.String,comment:"The target email for which the rate limits are to be reset."},resetSendTemporaryPassword:{type:Y.Boolean,comment:"Reset the send_temporary_password ratelimit for this user. This is hit when the user attempts to make too many login requests within a short time"},resetSendTemporaryPasswordPerDay:{type:Y.Boolean,comment:"Reset the send_temporary_password_per_day ratelimit for this user. This is hit when the user exceeds the total number of login requests per day"}}},{sectionName:"utilities",apiName:"adminCopyPageBetweenDevAndProd",displayName:"Copy Block between Dev and Prod",emoji:"🔁",description:"Copies a page and its descendents between the Development Environment and Production. Copied content will become a child page under the destination page. Note: internal page links may break and user mentions will point to random users in the destination space",schema:{fromPageUrl:{type:Y.String,comment:"The page to copy. Example: https://www.notion.so/notion/Human-resources-5-bdfc23d160984392bdeea37255d7f95d"},toPageUrl:{type:Y.String,comment:"The page to insert the copied content. Example: https://www.notion.so/notion/Human-resources-5-bdfc23d160984392bdeea37255d7f95d"}},isDestructive:!0,requiresRole:"full"},{sectionName:"utilities",apiName:"adminCountWordsInPage",displayName:"Count words in page",emoji:"🔢",description:"Counts the words in a page and its descendents",schema:{blockUrl:{type:Y.String,comment:"The link to the page"}},isDestructive:!1,requiresRole:"none"},{sectionName:"recovery",apiName:"adminSetSpaceDomain",emoji:"️🌌",description:"Sets the domain of a workspace without checking reserved or badWords list",schema:{spaceId:{type:Y.String,table:f.bx},domain:{type:Y.String}},isDestructive:!0,requiresRole:"full"}]}}]);